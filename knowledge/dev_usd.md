# USDについての情報

## USDファイルの種類

USDファイルは、以下のものが存在します。     

|USDファイルの拡張子|説明|
|---|---|
|usda|テキストファイル|
|usd/usdc|バイナリファイル|
|usdz|usdファイルとイメージファイルを1つのファイルにしたもの|

usdaとusd/usdcファイルは、テキストとバイナリで異なりますが同じ内容を記載できます。     
バイナリファイルのほうがファイルサイズを小さくできます。     

usdファイルはテクスチャとしてイメージファイル(png/jpeg/exrなど)を参照します。     
複数のusdファイルやイメージファイルをまとめたものが「usdz」というファイルになります。    
これは無圧縮のzip形式です。     

## USDの構成

USDは以下のように記述されます。     
以下はusdaというテキストファイルです。     
```
#usda 1.0

def Xform "World"
{
    def Sphere "sphere"
    {
        color3f[] primvars:displayColor = [(0, 0, 1)]
        double radius = 1.0
    }
}
```

この場合は、半径1.0(cm)の球を原点の位置に青色で配置します。     
```
def Type名 "Prim名"
{
}
```
として1つの要素（Primと呼ばれます）が定義されます。     
「Xform」は空のNULLノード相当。    
その子として「Sphere」の球が配置されています。     
Omniverse上では以下のように表示されました。     
![knowledge_dev_usd_01.png](./images/knowledge_dev_usd_01.png)    

このときのPrim名は記載ルールがあります。     

* ASCIIの英数字、アンダーバーで構成 (日本語は使用できません)
* 先頭の文字は、数値を指定できません。
* 同一階層に同一Prim名を指定できません。

例えば、「球体」「9ABC」「AB-CD」などはPrim名として指定できません。     

プログラムでの変数名のような命名ルールです。     
そのため、これに沿っていない名前をusdに入れたい場合はPrim名をあらかじめ変更して格納する必要があります。     
Omniverseにこれらのルールに沿わない文字を無理やり入れた場合は、無効な文字は「_」（アンダーバー）に置き換えられます。      

